use std:ptr
use std:list [List]
use std:list:vec [Vec]

@![langItem(list as List)]

pub type string {
  inner [u8]
}

pub fn len {inner} as string -> uint = inner . len

fn toByteVec str as string -> Vec u8 =
  let len = len str in
  let ptr = std:prelude:alloc (len as int) in
    do str.inner . forEach #(ptr:write ptr)
    then { Vec u8 | ptr, len }
