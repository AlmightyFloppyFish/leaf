use std:ptr
use std:list [List [Slice]]
use std:list:vec [Vec]

pub type string {
  inner List u8
}

pub fn len {inner} as string -> uint = inner . len

pub fn toByteVec str as string -> Vec u8 =
  match str.inner
  | Slice {std:list:vec:Slice u8 | vec, start} -> vec
  | _ -> 
    let vec = vec:capacity (len str) in
      do str.inner
         . fold #(\i v -> do vec:unsafe_set i v vec then i + 1) 0
      then vec
